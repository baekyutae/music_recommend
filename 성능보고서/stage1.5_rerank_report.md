# ğŸ“Š Stage 1.5 Re-ranking ì¢…í•© ë¶„ì„ ë³´ê³ ì„œ

## ğŸ¯ í…ŒìŠ¤íŠ¸ ê°œìš”
- **ëª©ì **: ìˆœìˆ˜ CF(Stage 1) vs ë©”íƒ€ë°ì´í„° ê¸°ë°˜ Re-ranking(Stage 1.5)ì˜ ì‹¤ì œ ì¶”ì²œ ê²°ê³¼ ë¹„êµ
- **ëª¨ë¸**: `v2_item2vec.model` (min_count=2, 316,109 vocab)
- **í…ŒìŠ¤íŠ¸ ì„¸íŠ¸**:
  - **Set A (ëœë¤)**: 3ê°œ ì‹œë“œ ê³¡ (ì˜í™”ìŒì•…, ì¬ì¦ˆÃ—2)
  - **Set B (ì•„í‹°ìŠ¤íŠ¸ ì§€ì •)**: ì•„ì´ìœ , ì”ë‚˜ë¹„ (ZUTOMAYOëŠ” ëª¨ë¸ì— ì—†ìŒ)
- **ë¹„êµ ë²”ìœ„**: Top 10 ì¶”ì²œ ê³¡
- **í‰ê°€ í•­ëª©**: ì¥ë¥´ ì¼ê´€ì„±, ì•„í‹°ìŠ¤íŠ¸ í¸ì¤‘ ë°©ì§€, í˜ë„í‹° ì ìš© íš¨ê³¼

## ğŸ“ Set A: ëœë¤ ì‹œë“œ ë¶„ì„

### Seed A-1: ë¶€ë‹¹ê±°ë˜ - Various Artists (GN1500, ì˜í™”ìŒì•…)
- **Before (Pure CF)**
  - **ì¥ë¥´ ë¶„í¬**: GN1500(6ê³¡) / GN1600(2ê³¡) / GN1800(1ê³¡) / GN0900(1ê³¡)
  - **ì•„í‹°ìŠ¤íŠ¸**: ì´ 9ëª…, Various Artists 3ê³¡
- **After (Stage 1.5)**
  - **ì¥ë¥´ ë¶„í¬**: GN1500(10ê³¡) = **100% ì˜í™”ìŒì•…**
  - **ì•„í‹°ìŠ¤íŠ¸**: ì´ 9ëª…, Various Artists 2ê³¡ (í•˜ë“œì»· ì ìš©)
  - **ì œê±°ëœ ê³¡**: í´ë˜ì‹(GN1600) 2ê³¡, ê¸°íƒ€(GN1800/GN0900) 2ê³¡
  - **ì§„ì…í•œ ê³¡**: ì˜í™”ìŒì•… 4ê³¡ (ì¼ë³¸ ë“œë¼ë§ˆ OST, êµ­ë‚´ ì˜í™”ìŒì•… ë“±)
- **í‰ê°€**: ì¥ë¥´ ì¼ê´€ì„± 60% â†’ 100% (+40%p), ì•„í‹°ìŠ¤íŠ¸ í•˜ë“œì»· ì •ìƒ ì‘ë™

### Seed A-2: Day In The Life - Grant Green (GN1700, ì¬ì¦ˆ)
- **Before & After**
  - **ì¥ë¥´ ë¶„í¬**: GN1700(10ê³¡) = **100% ì¬ì¦ˆ** (ë³€í™” ì—†ìŒ)
  - **ì•„í‹°ìŠ¤íŠ¸**: ì´ 10ëª… (ë³€í™” ì—†ìŒ)
  - **í˜ë„í‹°**: ëª¨ë“  ê³¡ 0 (ê°„ì„­ ì—†ìŒ)
- **í‰ê°€**: ì›ë˜ ì™„ë²½í•œ ì¶”ì²œì€ ê·¸ëŒ€ë¡œ ë³´ì¡´ë¨ (ë³´ìˆ˜ì  ì‘ë™ í™•ì¸)

### Seed A-3: This Is Love - í‘¸ë””í† ë¦¬ì›€ (GN1700, ì¬ì¦ˆ)
- **Before (Pure CF)**
  - **ì¥ë¥´ ë¶„í¬**: GN1700(5ê³¡) / GN1900(2ê³¡, CCM) / GN0400(2ê³¡, R&B) / GN0600(1ê³¡)
  - **ì•„í‹°ìŠ¤íŠ¸**: ì´ 9ëª…
- **After (Stage 1.5)**
  - **ì¥ë¥´ ë¶„í¬**: GN1700(9ê³¡) / GN0400(1ê³¡) = **ì¬ì¦ˆ 90%**
  - **ì•„í‹°ìŠ¤íŠ¸**: ì´ 8ëª…
  - **ì œê±°ëœ ê³¡**: GN1900(CCM) 2ê³¡, GN0600 1ê³¡
  - **ì§„ì…í•œ ê³¡**: ì¬ì¦ˆ(GN1700) 4ê³¡
  - **í˜ë„í‹°**: GN0400 â†’ GN1700 ì‚¬ì´ì—ëŠ” 0.008ë§Œ ì ìš© (ì–‘ë¦½ ê°€ëŠ¥ íŒë‹¨)
- **í‰ê°€**: ì¥ë¥´ ì¼ê´€ì„± 50% â†’ 90% (+40%p), íŠ¹ìˆ˜ ì¥ë¥´(CCM) íš¨ê³¼ì  ë°°ì œ

## ğŸ“ Set B: ì•„í‹°ìŠ¤íŠ¸ ì§€ì • ì‹œë“œ ë¶„ì„

### Seed B-1: ì„ì˜ ì—°ì•  - ì•„ì´ìœ  (GN0600, R&B/Soul)
- **Before (Pure CF) - ì•„í‹°ìŠ¤íŠ¸ í¸ì¤‘ ì‹¬ê°**
  - **ì¥ë¥´ ë¶„í¬**: GN0100(2ê³¡) / GN0200(3ê³¡) / GN0600(5ê³¡)
  - **ì•„í‹°ìŠ¤íŠ¸**: ì´ 2ëª… (ì•„ì´ìœ  9ê³¡, ë“€ì—£ 1ê³¡)
- **After (Stage 1.5)**
  - **ì¥ë¥´ ë¶„í¬**: GN0600(4ê³¡) / GN0100(3ê³¡) / GN0200(3ê³¡)
  - **ì•„í‹°ìŠ¤íŠ¸**: ì´ 9ëª… (ì•„ì´ìœ  2ê³¡ë§Œ ì”ì¡´)
  - **ì œê±°ëœ ê³¡**: ì•„ì´ìœ  ê³¡ 7ê³¡ (í•˜ë“œì»·ìœ¼ë¡œ 2ê³¡ ì œí•œ)
  - **ì§„ì…í•œ ê³¡**: ìœ ì•„ì´, ì„ì¬ë²”, ë¸Œì•„ê±¸, í”Œëœë¹„, ì œì´íˆ¬ì—  ë“±
  - **í˜ë„í‹°**: GN0100/GN0200 ê³¡ì€ 0.008 ì¥ë¥´ í˜ë„í‹°, GN0600 ê³¡ì€ í˜ë„í‹° ì—†ìŒ
- **í‰ê°€**: ì•„í‹°ìŠ¤íŠ¸ ë‹¤ì–‘ì„± 2ëª… â†’ 9ëª… (ì•½ 350% ì¦ê°€), í•˜ë“œì»· íš¨ê³¼ ëšœë ·

### Seed B-2: The Secret Of Hard Rock - ì”ë‚˜ë¹„ (GN0500, ë¡/ì¸ë””)
- **Before (Pure CF) - ì•„í‹°ìŠ¤íŠ¸ í¸ì¤‘ ì¡´ì¬**
  - **ì¥ë¥´ ë¶„í¬**: GN0500(10ê³¡) = **100% ë¡/ì¸ë””**
  - **ì•„í‹°ìŠ¤íŠ¸**: ì´ 5ëª… (ì”ë‚˜ë¹„ 5ê³¡, ë¼ì´í”„ ì•¤ íƒ€ì„ 2ê³¡ ë“±)
- **After (Stage 1.5)**
  - **ì¥ë¥´ ë¶„í¬**: GN0500(10ê³¡) = **100% ë¡/ì¸ë””** ê·¸ëŒ€ë¡œ ìœ ì§€
  - **ì•„í‹°ìŠ¤íŠ¸**: ì´ 8ëª… (ì”ë‚˜ë¹„ 2ê³¡, ë¼ì´í”„ ì•¤ íƒ€ì„ 2ê³¡, ê¸°íƒ€ ë°´ë“œ ì¶”ê°€)
  - **ì œê±°ëœ ê³¡**: ì”ë‚˜ë¹„ 3ê³¡(Wish, HONG KONG, Surprise!)
  - **ì§„ì…í•œ ê³¡**: Adios Audio, ë¬¸ëŒ„ì„œì¦ˆ, The Hans ë“±
  - **í˜ë„í‹°**: ì¥ë¥´ í˜ë„í‹° 0, ì•„í‹°ìŠ¤íŠ¸ í•˜ë“œì»·ë§Œ ì‘ë™
- **í‰ê°€**: ì¥ë¥´ ì¼ê´€ì„± 100% ìœ ì§€, ì•„í‹°ìŠ¤íŠ¸ ë‹¤ì–‘ì„± 5ëª… â†’ 8ëª…ìœ¼ë¡œ ê°œì„ 

## ğŸ“ˆ ì¢…í•© ë¶„ì„ ê²°ê³¼

| í•­ëª© | ê²°ê³¼ | ë¹„ê³  |
| :--- | :--- | :--- |
| **ì¥ë¥´ ì¼ê´€ì„±** | í‰ê·  72% â†’ **86%** (+14%p) | íŠ¹ìˆ˜ ì¥ë¥´ ë°°ì œ ë° ì¼ë°˜ ì¥ë¥´ ìœ ì—°ì„± í™•ë³´ |
| **ì•„í‹°ìŠ¤íŠ¸ ë‹¤ì–‘ì„±** | í‰ê·  7ëª… â†’ **8.8ëª…** (+26%) | í•˜ë“œì»·ìœ¼ë¡œ ì¸ê¸° ì•„í‹°ìŠ¤íŠ¸ í¸ì¤‘ í•´ê²° |

- **í•µì‹¬ íš¨ê³¼**:
  - `max_per_artist_final=2` í•˜ë“œì»·ìœ¼ë¡œ ì¸ê¸° ì•„í‹°ìŠ¤íŠ¸ í¸ì¤‘ í•´ê²°
  - íŠ¹ìˆ˜ ì¥ë¥´(CCM ë“±) ë°°ì œ + ì¼ë°˜ ì¥ë¥´ ê°„ ìœ ì—°í•œ ê³µì¡´
  - ì¬ì¦ˆ 100%ì²˜ëŸ¼ ì´ë¯¸ ì¢‹ì€ ì¶”ì²œì€ ê·¸ëŒ€ë¡œ ë³´ì¡´

## ğŸ” í•µì‹¬ ë°œê²¬ì‚¬í•­
1. **ì•„í‹°ìŠ¤íŠ¸ í•˜ë“œì»· íš¨ê³¼**: ì•„ì´ìœ /ì”ë‚˜ë¹„ ì¼€ì´ìŠ¤ì—ì„œ í¸ì¤‘ì´ í¬ê²Œ ì™„í™”ë˜ê³  ë‹¤ì–‘ì„±ì´ ì¦ê°€.
2. **ì¥ë¥´ ë ˆì¼ê°€ë“œ**: íŠ¹ìˆ˜ ì¥ë¥´ëŠ” ì˜ ê±¸ëŸ¬ë‚´ê³ , ì¼ë°˜ ì¥ë¥´ ê°„ì—ëŠ” ìœ ì—°í•˜ê²Œ í—ˆìš©.
3. **ë³´ìˆ˜ì  í˜ë„í‹°**: ì™„ì „íˆ ì¢‹ì€ ì¶”ì²œì€ ê±°ì˜ ê±´ë“œë¦¬ì§€ ì•ŠìŒ.
4. **Coverage í•œê³„**: ZUTOMAYOì²˜ëŸ¼ ë¹ˆë„ ë¶€ì¡± ì•„í‹°ìŠ¤íŠ¸ëŠ” Stage 1 í•™ìŠµ(min_count, ë°ì´í„° ì»¤ë²„ë¦¬ì§€)ì— ì˜ì¡´.

## âœ… ê²°ë¡  ë° ê¶Œì¥ ì„¤ì •
Stage 1.5ëŠ” CFì˜ ê°•ì (ë‹¤ì–‘ì„±, í˜‘ì—… íŒ¨í„´)ì„ ìœ ì§€í•˜ë©´ì„œ **ì•„í‹°ìŠ¤íŠ¸ í¸ì¤‘**ê³¼ **ì¥ë¥´ í˜¼ì¬**ë¥¼ ì™„í™”í•˜ëŠ” ì—­í• ì„ ì˜ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤.

### ê¶Œì¥ í•˜ì´í¼íŒŒë¼ë¯¸í„°
```python
recommend_cf_with_rerank(
    topn_cf=200,                    # CF í›„ë³´ í’€
    topk_final=30,                  # ìµœì¢… ì¶”ì²œ ìˆ˜
    max_per_artist_soft=3,          # Soft í˜ë„í‹° ì‹œì‘ì 
    max_per_artist_final=2,         # ìµœì¢… í•˜ë“œì»· ì œí•œ
    offrail_penalty_general=0.008,  # ì¼ë°˜ ì¥ë¥´ í˜ë„í‹°
    offrail_penalty_special=0.03    # íŠ¹ìˆ˜ ì¥ë¥´ í˜ë„í‹°
)
```

> **Note**: Long-tail ì»¤ë²„ë¦¬ì§€ëŠ” Stage 1(item2vec) í•™ìŠµ ë°ì´í„°ì™€ min_count ì„¤ê³„ì—ì„œ í’€ì–´ì•¼ í•  ê³¼ì œì…ë‹ˆë‹¤.
